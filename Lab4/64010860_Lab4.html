<!DOCTYPE html>
<html>
    <head></head>
    <body>
        <div id="maincontainer"></div>
        <script>
            var me_div = document.getElementById("maincontainer");
            var inner_div = document.createElement("div");
            var h2 = document.createElement("h2");

            var text_element = document.createTextNode("Exercise 04: Javascript&DOM");
            h2.appendChild(text_element);
            me_div.appendChild(h2);

            var button = document.createElement("button");
            var buttonText = document.createTextNode("Click me to display Date and Time"); // Display button , web worker is located at the end of script tag

            button.appendChild(buttonText);
            me_div.appendChild(button);
            
            me_div.appendChild(document.createElement("br"));
            me_div.appendChild(document.createElement("br"));
            me_div.appendChild(document.createElement("br"));
            var link = document.createElement("a"); // start of Personal Info button
            link.setAttribute("id","infoButton");
            link.style.color = "pink";
            link.href ="#";
            link.textContent = "Personal Info";
            link.onclick = showHidden;
            link.onmouseover = ColorOnMouseOver;
            link.onmouseout = mouseOut;
            me_div.appendChild(link);

            var hiddenText = document.createElement("div");
            hiddenText.setAttribute("id","hiddenText");
            hiddenText.style.display = "none";

            var ul = document.createElement("ul"); // bullet inside Personal Info
            var li1 = document.createElement("li");
            var li1Text = document.createTextNode("Suppaphol Areewattanawong, ID: 64010860");
            li1.appendChild(li1Text);
            ul.appendChild(li1);
            var li2 = document.createElement("li");
            var li2Text = document.createTextNode("Subject: Web Application Development");
            li2.appendChild(li2Text);
            ul.appendChild(li2);
            var li3 = document.createElement("li");
            var li3Text = document.createTextNode("Semester: 2");
            li3.appendChild(li3Text);
            ul.appendChild(li3);
            hiddenText.appendChild(ul); // append all bullet into hiddenText

            function showHidden() 
            {
                    var x = document.getElementById('hiddenText');
                    if (x.style.display === "none") {
                        x.style.display = "block";
                    }   
                    else {
                    x.style.display = "none";
                    }
            }

            function ColorOnMouseOver()
            {
                link.style.color = "blue";
                link.style.backgroundColor = "yellow";
            }

            function mouseOut()
            {
                link.style.color = "pink";
                link.style.backgroundColor = "white";
            }
            
            me_div.appendChild(hiddenText); // end of Personal Info button

            var h1 = document.createElement("h1");
            var text2 = document.createTextNode("Snapshots");
            h1.setAttribute("id","snapshots");
            h1.appendChild(text2)
            me_div.appendChild(h1);

            var ul2 = document.createElement("ul"); // start of List below Snapshots Text
            var pic1 = document.createElement("li");
            var pic1text = document.createElement("a");
            pic1text.href ="#";
            pic1text.textContent = "Fireworks";
            pic1.appendChild(pic1text)
            ul2.appendChild(pic1);
            me_div.append(ul2); // add bullet to the main page

            pic1text.onclick = function() {

                var existingImg = me_div.getElementsByTagName("img")[0];
                if (existingImg) {
                    me_div.removeChild(existingImg);
                }
                var img = document.createElement("img");
                img.src = "https://www.ontariosciencecentre.ca/media/2098/fireworksheader3.jpg";
                img.alt = "Fireworks";
                img.width = "600";
                img.height = "400";
                me_div.appendChild(img);
            };
            ul2.appendChild(pic1);

            
            var pic2 = document.createElement("li");
            var pic2text = document.createElement("a");
            pic2text.href ="#";
            pic2text.textContent = "Crest";
            pic2.appendChild(pic2text);
            ul2.appendChild(pic2);

            pic2text.onclick = function() {

                var existingImg = me_div.getElementsByTagName("img")[0];
                if (existingImg) {
                    me_div.removeChild(existingImg);
                }
                var img = document.createElement("img");
                img.src = "https://ca-times.brightspotcdn.com/dims4/default/0b8846b/2147483647/strip/true/crop/2000x1334+0+0/resize/1200x800!/format/webp/quality/80/?url=https%3A%2F%2Fcalifornia-times-brightspot.s3.amazonaws.com%2F09%2Fe2%2Fe31acf1245cdb176efb337baae8c%2Fhuc2-018995-r-0366c77b.jpeg";
                img.alt = "Crest";
                img.width = "600";
                img.height = "400";
                me_div.appendChild(img);
            };
            ul2.appendChild(pic2);


            var pic3 = document.createElement("li");
            var pic3text = document.createElement("a");
            pic3text.href ="#";
            pic3text.textContent = "Action";
            pic3.appendChild(pic3text);
            ul2.appendChild(pic3);

            pic3text.onclick = function() {

                var existingImg = me_div.getElementsByTagName("img")[0];
                if (existingImg) {
                    me_div.removeChild(existingImg);
                }
                var img = document.createElement("img");
                img.src = "https://mymodernmet.com/wp/wp-content/uploads/2017/10/cat-poses-martial-arts-14.jpg";
                img.alt = "action";
                img.width = "750";
                img.height = "1000";
                me_div.appendChild(img);
            };
            ul2.appendChild(pic3);

            var pic4 = document.createElement("li");
            var pic4text = document.createElement("a");
            pic4text.href ="#";
            pic4text.textContent = "Buffalo";
            pic4.appendChild(pic4text);
            ul2.appendChild(pic4);

            pic4text.onclick = function() {

                var existingImg = me_div.getElementsByTagName("img")[0];
                if (existingImg) {
                    me_div.removeChild(existingImg);
                }
                var img = document.createElement("img");
                img.src = "https://scontent.fbkk12-4.fna.fbcdn.net/v/t1.6435-9/58442530_573598986484372_8436479963179253760_n.jpg?_nc_cat=103&ccb=1-7&_nc_sid=825194&_nc_eui2=AeE6wgJbvvWDmyiVJgJdcSGjpLKETAxKOHOksoRMDEo4czH6YzRGXoF1B3ksIrMWgwxqaq0fMvNlt2Qy-K1t17Uz&_nc_ohc=D4zw3jf3i6IAX8GfbFl&_nc_ht=scontent.fbkk12-4.fna&oh=00_AfD6Aht3i6O2_D_AcRgYM4RZ3wufZSF1Eb0ImkrO98hEbQ&oe=64130219";
                img.alt = "buffalo";
                img.width = "600";
                img.height = "400";
                me_div.appendChild(img);
            };
            ul2.appendChild(pic4);

            var img = document.createElement("img"); // the picture that shown before you click on each pic of bullet
            img.src = "https://as1.ftcdn.net/v2/jpg/02/70/72/56/1000_F_270725613_4XgF5u5X0kC6CFOV9SIXb3F1awoxF2rA.jpg";
            img.alt = "action";
            img.width = "1000";
            img.height = "444";
            me_div.appendChild(img);

            var worker = new Worker("worker.js"); // load web worker
  
            var button = document.querySelector("button");
            var clicked = false;
            var intervalId = null;
            button.addEventListener("click", function() 
            {
                if (!clicked)
                {
                    worker.postMessage("start");
                    button.style.position = 'fixed';
                    button.style.top = '0';
                    button.style.right = '0';

                    button.style.borderColor = "black";
                    var bgColors = ["azure","grey","orange","black","navy","magenta"]
                    var colors = ["blue","pink","green","orange","yellow","red"];
                    var currentColor = 0;
                    function changeColor() 
                    {
                        --currentColor

                        if (currentColor < 0) currentColor = colors.length - 1;

                        for (var i = 0; i < 7; i++) 
                        {
                            button.style.color = colors[(currentColor +i) % colors.length]
                            button.style.backgroundColor = bgColors[(currentColor+i)% colors.length]
                        }
                    }
                    intervalID = setInterval(changeColor, 1000)
                    clicked = true;
                }
                else if (clicked)
                {
                    console.log('stop')
                    worker.postMessage("stop")
                    clicked = false
                    clearInterval(intervalID)
                    button.style.position = '';
                }
                

                
            });
            
            worker.addEventListener("message", function(event) 
            {
                button.textContent = event.data;
                
            });

            
            
        </script>
    </body>
</html>